(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77270366"],{a55b:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("LoHeader"),t.logMethod?n("LoTelForm",{attrs:{verify:t.verify,_handleToVerify:t._handleToVerify,_handleToLogin:t._handleToLogin,loginData:t.loginData,data:t.formInfo}}):n("LoPwdForm",{attrs:{data:t.formInfo}}),n("LoType",{attrs:{data:t.formInfo,method:t.updateMethod}})],1)},o=[],r=(n("96cf"),n("89ba")),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"header-title"},[n("div",{staticClass:"logo"}),n("router-link",{staticClass:"close",attrs:{to:"/home"}},[n("span")])],1)},s=[],l={name:"LoHeader"},c=l,u=n("2877"),d=Object(u["a"])(c,i,s,!1,null,"40ee64b6",null),f=d.exports,p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"login-body"},[n("form",{attrs:{action:"",method:"POST",enctype:"application/x-www-form-urlencoded"}},[n("TopInput",{attrs:{loginData:t.loginData,data:t.data}}),n("div",{staticClass:"code-input input"},[n("label",{attrs:{for:"pwd"}},[t._v("验证码")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.loginData.verify,expression:"loginData.verify"}],attrs:{type:"text",id:"pwd",placeholder:"请输入验证码"},domProps:{value:t.loginData.verify},on:{input:function(e){e.target.composing||t.$set(t.loginData,"verify",e.target.value)}}}),!1===t.verify.flag?n("div",{staticClass:"code-button",on:{click:t._handleToVerify}},[t._v("获取验证码")]):n("div",{staticClass:"code-button"},[t._v(t._s(t.verify.time)+"s")])]),n("div",{staticClass:"submit-box"},[n("Submit",{attrs:{_handleToLogin:t._handleToLogin,data:t.data}}),t._m(0)],1)],1)])},m=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"submit-tip"},[n("i",{staticClass:"icon"}),t._v("同意"),n("a",{attrs:{href:"#"}},[t._v("《唯品会服务条款》")]),t._v("、"),n("a",{attrs:{href:"#"}},[t._v("《隐私条款》")]),t._v("、"),n("a",{attrs:{href:"#"}},[t._v("《唯品支付用户服务协议》")])])}],h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tel-input input"},[n("label",{attrs:{for:"tel"}},[t._v(t._s(t.data.topInput))]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.loginData.email,expression:"loginData.email"}],attrs:{type:"text",id:"tel",placeholder:t.data.topHolder},domProps:{value:t.loginData.email},on:{input:function(e){e.target.composing||t.$set(t.loginData,"email",e.target.value)}}})])},v=[],g={name:"TopInput",props:["data","loginData"]},_=g,b=Object(u["a"])(_,h,v,!1,null,"ecff3956",null),y=b.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"submit-btn",on:{click:t._handleToLogin}},[t._v(t._s(t.data.subBtn))])},T=[],x={name:"Submit",props:["data","_handleToLogin"]},I=x,L=Object(u["a"])(I,w,T,!1,null,"cfafb816",null),D=L.exports,C={name:"LoTelForm",components:{TopInput:y,Submit:D},props:["data","loginData","_handleToLogin","_handleToVerify","verify"]},k=C,O=Object(u["a"])(k,p,m,!1,null,"0dc0933c",null),j=O.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("fieldset",{staticClass:"J-login-models-m"},[n("legend",[t._v("或")]),n("a",{staticClass:"login-pop-mobile J-mlogin-login-normal",on:{click:t.method}},[t._v(t._s(t.data.checkBtn))])])},E=[],S={name:"LoType",props:["method","data"]},B=S,P=Object(u["a"])(B,$,E,!1,null,"57782b99",null),R=P.exports,F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"login-body"},[n("form",{attrs:{action:"",method:"POST",enctype:"application/x-www-form-urlencoded"}},[n("TopInput",{attrs:{data:t.data}}),t._m(0),n("div",{staticClass:"submit-box"},[n("Submit",{attrs:{data:t.data}}),t._m(1)],1)],1)])},H=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"code-input input"},[n("label",{attrs:{for:"pwd"}},[t._v("密 码")]),n("input",{attrs:{type:"password",id:"pwd",placeholder:"请输入密码"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"forget"},[n("a",{attrs:{href:""}},[t._v("忘记密码")])])}],M={name:"LoPwdForm",components:{TopInput:y,Submit:D},props:["data"]},V=M,J=(n("ddb4"),Object(u["a"])(V,F,H,!1,null,"4050dd0c",null)),z=J.exports,A=(n("d3b7"),"http://122.51.57.152:3000"),N="".concat(A,"/login"),Z="".concat(A,"/login/verify"),G={handleToLogin:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(N,{method:"POST",credentials:"include",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(e)});case 2:return n=t.sent,t.next=5,n.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),handleToVerify:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(Z,"?email=").concat(e),{method:"GET",credentials:"include"});case 2:return n=t.sent,t.next=5,n.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},U={name:"Login",data:function(){return{logMethod:!0,formInfo:{topInput:"邮箱",topHolder:"请输入邮箱",subBtn:"邮箱验证登录",checkBtn:"密码登陆"},loginData:{email:"",verify:""},verify:{flag:!1,time:180}}},methods:{updateMethod:function(){this.logMethod=!this.logMethod},countDown:function(){var t=this,e=setInterval((function(){t.verify.time>0?t.verify.time--:(t.verify.time=180,t.verify.flag=!0,clearInterval(e))}),1e3)},_handleToVerify:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,!e.test(this.loginData.email)){t.next=8;break}return t.next=4,G.handleToVerify(this.loginData.email);case 4:n=t.sent,0===n.status&&(this.verify.flag=!0,this.countDown()),t.next=9;break;case 8:alert("邮箱格式有误");case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),_handleToLogin:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,G.handleToLogin(this.loginData);case 2:e=t.sent,console.log(e),0===e.status?(window.localStorage.setItem("email",this.loginData.email),this.$router.push("/user")):-1===e.status?alert(e.msg):-3===e.status&&alert(e.msg);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),listen:function(t){t?(this.formInfo.topInput="邮箱",this.formInfo.topHolder="请输入邮箱",this.formInfo.subBtn="邮箱验证登录",this.formInfo.checkBtn="密码登陆"):(this.formInfo.topInput="登录名",this.formInfo.topHolder="请输入手机号或邮箱",this.formInfo.subBtn="登录",this.formInfo.checkBtn="手机号注册登录")}},watch:{logMethod:"listen"},components:{LoHeader:f,LoTelForm:j,LoPwdForm:z,LoType:R}},q=U,K=Object(u["a"])(q,a,o,!1,null,"10880762",null);e["default"]=K.exports},ddb4:function(t,e,n){"use strict";var a=n("ea0d"),o=n.n(a);o.a},ea0d:function(t,e,n){}}]);
//# sourceMappingURL=chunk-77270366.f115b2ab.js.map