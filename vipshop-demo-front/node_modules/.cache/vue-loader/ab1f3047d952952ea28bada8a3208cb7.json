{"remainingRequest":"/Users/ragdoll/Desktop/vipshop-demo/vipshop-demo-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ragdoll/Desktop/vipshop-demo/vipshop-demo-front/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ragdoll/Desktop/vipshop-demo/vipshop-demo-front/src/views/Login.vue","mtime":1573464868142},{"path":"/Users/ragdoll/Desktop/vipshop-demo/vipshop-demo-front/node_modules/babel-loader/lib/index.js","mtime":1569588482472},{"path":"/Users/ragdoll/Desktop/vipshop-demo/vipshop-demo-front/node_modules/cache-loader/dist/cjs.js","mtime":1571792275068},{"path":"/Users/ragdoll/Desktop/vipshop-demo/vipshop-demo-front/node_modules/vue-loader/lib/index.js","mtime":1572676609767}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMb0hlYWRlciBmcm9tICIuLi9jb21wb25lbnRzL0xvZ2luL0xvSGVhZGVyIjsKaW1wb3J0IExvVGVsRm9ybSBmcm9tICIuLi9jb21wb25lbnRzL0xvZ2luL0xvVGVsRm9ybSI7CmltcG9ydCBMb1R5cGUgZnJvbSAiLi4vY29tcG9uZW50cy9Mb2dpbi9Mb1R5cGUiOwppbXBvcnQgTG9Qd2RGb3JtIGZyb20gIi4uL2NvbXBvbmVudHMvTG9naW4vTG9Qd2RGb3JtIjsKaW1wb3J0IGxvZ2luQXBpIGZyb20gIi4uL2FwaXMvbG9naW5BcGkiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkxvZ2luIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9nTWV0aG9kOiB0cnVlLAogICAgICBmb3JtSW5mbzogewogICAgICAgIHRvcElucHV0OiAi6YKu566xIiwKICAgICAgICB0b3BIb2xkZXI6ICLor7fovpPlhaXpgq7nrrEiLAogICAgICAgIHN1YkJ0bjogIumCrueusemqjOivgeeZu+W9lSIsCiAgICAgICAgY2hlY2tCdG46ICLlr4bnoIHnmbvpmYYiCiAgICAgIH0sCiAgICAgIGxvZ2luRGF0YTogewogICAgICAgIGVtYWlsOiAiIiwKICAgICAgICB2ZXJpZnk6ICIiCiAgICAgIH0sCiAgICAgIHZlcmlmeTogewogICAgICAgIGZsYWc6IGZhbHNlLAogICAgICAgIHRpbWU6IDE4MAogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICB1cGRhdGVNZXRob2QoKSB7CiAgICAgIHRoaXMubG9nTWV0aG9kID0gIXRoaXMubG9nTWV0aG9kCiAgICB9LAogICAgY291bnREb3duKCkgewogICAgICBsZXQgdGltZXIgPSBzZXRJbnRlcnZhbCgoKT0+ewogICAgICAgIGlmICh0aGlzLnZlcmlmeS50aW1lID4gMCkgewogICAgICAgICAgdGhpcy52ZXJpZnkudGltZS0tCiAgICAgICAgfWVsc2UgewogICAgICAgICAgdGhpcy52ZXJpZnkudGltZSA9IDE4MDsKICAgICAgICAgIHRoaXMudmVyaWZ5LmZsYWcgPSB0cnVlOwogICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcikKICAgICAgICB9CiAgICAgIH0sMTAwMCkKICAgIH0sCiAgICBhc3luYyBfaGFuZGxlVG9WZXJpZnkoKSB7CiAgICAgIGxldCByZWcgPSAvXltBLVphLXowLTlcdTRlMDAtXHU5ZmE1XStAW2EtekEtWjAtOV8tXSsoXC5bYS16QS1aMC05Xy1dKykrJC87CiAgICAgIGlmIChyZWcudGVzdCh0aGlzLmxvZ2luRGF0YS5lbWFpbCkpIHsKICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgbG9naW5BcGkuaGFuZGxlVG9WZXJpZnkodGhpcy5sb2dpbkRhdGEuZW1haWwpOwogICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSAwKSB7CiAgICAgICAgICB0aGlzLnZlcmlmeS5mbGFnID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuY291bnREb3duKCk7CiAgICAgICAgfQogICAgICB9ZWxzZSB7CiAgICAgICAgYWxlcnQoIumCrueuseagvOW8j+acieivryIpCiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBfaGFuZGxlVG9Mb2dpbigpIHsKICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IGxvZ2luQXBpLmhhbmRsZVRvTG9naW4odGhpcy5sb2dpbkRhdGEpOwogICAgICBjb25zb2xlLmxvZyhyZXN1bHQpCiAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSAwKSB7CiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdlbWFpbCcsIHRoaXMubG9naW5EYXRhLmVtYWlsKTsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3VzZXInKQoKICAgICAgfSBlbHNlIGlmIChyZXN1bHQuc3RhdHVzID09PSAtMSkgewogICAgICAgIC8vIERpYWxvZyh7IG1lc3NhZ2U6IHJlc3VsdC5tc2cgfSk7CiAgICAgICAgYWxlcnQocmVzdWx0Lm1zZykKCiAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnN0YXR1cyA9PT0gLTMpIHsKICAgICAgICAvLyBEaWFsb2coeyBtZXNzYWdlOiByZXN1bHQubXNnIH0pOwogICAgICAgIGFsZXJ0KHJlc3VsdC5tc2cpCiAgICAgIH0KICAgIH0sCiAgICBsaXN0ZW4odmFsKSB7CiAgICAgIGlmICh2YWwpIHsKICAgICAgICB0aGlzLmZvcm1JbmZvLnRvcElucHV0ID0gIumCrueusSI7CiAgICAgICAgdGhpcy5mb3JtSW5mby50b3BIb2xkZXIgPSAi6K+36L6T5YWl6YKu566xIjsKICAgICAgICB0aGlzLmZvcm1JbmZvLnN1YkJ0biA9ICLpgq7nrrHpqozor4HnmbvlvZUiOwogICAgICAgIHRoaXMuZm9ybUluZm8uY2hlY2tCdG4gPSAi5a+G56CB55m76ZmGIjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmZvcm1JbmZvLnRvcElucHV0ID0gIueZu+W9leWQjSIKICAgICAgICB0aGlzLmZvcm1JbmZvLnRvcEhvbGRlciA9ICLor7fovpPlhaXmiYvmnLrlj7fmiJbpgq7nrrEiOwogICAgICAgIHRoaXMuZm9ybUluZm8uc3ViQnRuID0gIueZu+W9lSI7CiAgICAgICAgdGhpcy5mb3JtSW5mby5jaGVja0J0biA9ICLmiYvmnLrlj7fms6jlhoznmbvlvZUiOwogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgbG9nTWV0aG9kOiAibGlzdGVuIgogIH0sCiAgY29tcG9uZW50czogewogICAgTG9IZWFkZXIsCiAgICBMb1RlbEZvcm0sCiAgICBMb1B3ZEZvcm0sCiAgICBMb1R5cGUKICB9Cn0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <section>\n    <LoHeader />\n    <LoTelForm :verify=\"verify\" :_handleToVerify=\"_handleToVerify\" :_handleToLogin=\"_handleToLogin\" :loginData=\"loginData\" :data=\"formInfo\" v-if=\"logMethod\" />\n    <LoPwdForm :data=\"formInfo\" v-else />\n    <LoType :data=\"formInfo\" :method=\"updateMethod\" />\n  </section>\n</template>\n\n<script>\n  import LoHeader from \"../components/Login/LoHeader\";\n  import LoTelForm from \"../components/Login/LoTelForm\";\n  import LoType from \"../components/Login/LoType\";\n  import LoPwdForm from \"../components/Login/LoPwdForm\";\n  import loginApi from \"../apis/loginApi\";\n  export default {\n    name: \"Login\",\n    data() {\n      return {\n        logMethod: true,\n        formInfo: {\n          topInput: \"邮箱\",\n          topHolder: \"请输入邮箱\",\n          subBtn: \"邮箱验证登录\",\n          checkBtn: \"密码登陆\"\n        },\n        loginData: {\n          email: \"\",\n          verify: \"\"\n        },\n        verify: {\n          flag: false,\n          time: 180\n        }\n      }\n    },\n    methods: {\n      updateMethod() {\n        this.logMethod = !this.logMethod\n      },\n      countDown() {\n        let timer = setInterval(()=>{\n          if (this.verify.time > 0) {\n            this.verify.time--\n          }else {\n            this.verify.time = 180;\n            this.verify.flag = true;\n            clearInterval(timer)\n          }\n        },1000)\n      },\n      async _handleToVerify() {\n        let reg = /^[A-Za-z0-9\\u4e00-\\u9fa5]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/;\n        if (reg.test(this.loginData.email)) {\n          let result = await loginApi.handleToVerify(this.loginData.email);\n          if (result.status === 0) {\n            this.verify.flag = true;\n            this.countDown();\n          }\n        }else {\n          alert(\"邮箱格式有误\")\n        }\n      },\n      async _handleToLogin() {\n        let result = await loginApi.handleToLogin(this.loginData);\n        console.log(result)\n        if (result.status === 0) {\n          window.localStorage.setItem('email', this.loginData.email);\n          this.$router.push('/user')\n\n        } else if (result.status === -1) {\n          // Dialog({ message: result.msg });\n          alert(result.msg)\n\n        } else if (result.status === -3) {\n          // Dialog({ message: result.msg });\n          alert(result.msg)\n        }\n      },\n      listen(val) {\n        if (val) {\n          this.formInfo.topInput = \"邮箱\";\n          this.formInfo.topHolder = \"请输入邮箱\";\n          this.formInfo.subBtn = \"邮箱验证登录\";\n          this.formInfo.checkBtn = \"密码登陆\";\n        } else {\n          this.formInfo.topInput = \"登录名\"\n          this.formInfo.topHolder = \"请输入手机号或邮箱\";\n          this.formInfo.subBtn = \"登录\";\n          this.formInfo.checkBtn = \"手机号注册登录\";\n        }\n      }\n    },\n    watch: {\n      logMethod: \"listen\"\n    },\n    components: {\n      LoHeader,\n      LoTelForm,\n      LoPwdForm,\n      LoType\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>"]}]}